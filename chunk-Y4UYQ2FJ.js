import{Ma as s,Na as r,Q as c,Qa as l,Sa as h,Ya as m,Z as d,Za as F,k as a,xa as f,y as p}from"./chunk-GEQ6AVHT.js";var n=(()=>{let t=class t{constructor(){if(this.uploadQueue=[],this.isUploading=!1,this.networkStatus$=new a(navigator.onLine),typeof Worker!==void 0)this.worker=new Worker(new URL("worker-2DY4A6FM.js",import.meta.url),{type:"module"});else throw new Error("Web worker are not supported in this environment.");this.worker.onmessage=({data:e})=>{e.success?console.log("File upload successfully: ",e.result):console.error("File upload failed: ",e.error),this.isUploading=!1,this.processQueue()},window.addEventListener("online",()=>this.networkStatus$.next(!0)),window.addEventListener("offline",()=>this.networkStatus$.next(!1)),this.networkStatus$.pipe(p(e=>e)).subscribe(()=>{this.uploadQueue.length>0&&!this.isUploading&&this.processQueue()})}enqueueFile(e){this.uploadQueue.push(e),this.processQueue()}processQueue(){if(this.uploadQueue.length===0||this.isUploading||!navigator.onLine)return;this.isUploading=!0;let e=this.uploadQueue.shift();setTimeout(()=>{this.worker.postMessage({file:e,retryCount:3})},10*1e3)}};t.\u0275fac=function(o){return new(o||t)},t.\u0275prov=c({token:t,factory:t.\u0275fac,providedIn:"root"});let i=t;return i})();var y=(()=>{let t=class t{constructor(e){this.fileUploadService=e,this.selectedFile=null}onFileSelected(e){this.selectedFile=e.target.files[0]}uploadFile(){if(!this.selectedFile){alert("Please select a file first.");return}this.fileUploadService.enqueueFile(this.selectedFile),console.log("File has been added to the upload queue.")}};t.\u0275fac=function(o){return new(o||t)(f(n))},t.\u0275cmp=d({type:t,selectors:[["app-file-upload"]],standalone:!0,features:[m([n]),F],decls:4,vars:0,consts:[["type","file",3,"change"],[3,"click"]],template:function(o,u){o&1&&(s(0,"div")(1,"input",0),l("change",function(g){return u.onFileSelected(g)}),r(),s(2,"button",1),l("click",function(){return u.uploadFile()}),h(3,"Upload File"),r()())}});let i=t;return i})();export{y as FileUploadComponent};
